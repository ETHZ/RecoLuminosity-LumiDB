schema:

1. 
create table lumiglobaltag( 
      tagname string PK,
      luminame   string not null
      trgname    string 
      hltname    string
      normname   string
)
2.
create table revision(
     revisionid uint64 PK,
     branchid uint32 not null,
     name string,
     comment string,
     ctime   timestamp
)
3.
create table revision_id(     #id helper table
     nextid uint64 PK
)
create index rev_branchid_idx on revision(branchid)

4.
create table luminorm_entry(   #versionable entity helper table
     entryid uint64, PK
     revisionid uint64 not null references revision(revisionid),
     name string
)
5.
create table luminorm(
     luminormid  uint32 PK
     revisionid  uint64 not null references revision(revisionid),
     entryid    uint64 not null references entry(entryid),
     defaultnorm  float not null,
     norm_1       float,
     energy_1     float,
     norm_2       float,
     energy_2     float,
     minrun       uint32,
     maxrun       uint32
)
6.
create table luminorm_id(          #id helper table
     nextid uint64 PK
)
7.
create table luminorm_entry_id(    #id helper table
     nextid uint64 PK
)
8.
create table lumidata_entry(       #versionable entity table
     lumidataid  uint64 PK,
     revisionid  uint64 not null references revision(revisionid),
     entryid     uint64 not null 
)
9.
create table lumidata(             #verionable data table
     lumidataid uint64 PK,
     revisionid uint64 not null references revision(revisionid) ,
     entryid    uint64 not null references lumientry(entryid),
     source     string
)
10.
create table lumidata_id(          #id helper table
     nextid uint64 PK
)
11.
create table lumidata_entry_id(    #id helper table
     nextid uint64 PK
)
12.
create table cmsrunsummary(        #data table
     runnum uint32 PK,
     hltkey string not null,
     l1key  string,
     fillnum uint32,
     sequence    string,
     starttime   timestamp(6),
     stoptime    timestamp(6)
)
13. 
create table lumilssummary(         #data table
     lumilssummaryid uint64 PK,
     lumidataid  uint64 not null refrences lumidata(lumidata_id),
     cmslsnum    uint32,
     lumilsnum   uint32,
     cmsalive    uint16,
     instlumi     float,
     instlumierror  float,
     instlumiquality  uint16,
     beamstatus   string,
     beamenergy float,
     cmsbxindexblob blob,
     beamintensityblob_1 blob,
     beamintesnsityblob_2 blob,
     norbit       uint32,
     startorbit   uint32
)
14.
create table lumilsdetail(           #data table
     lumilsdetailid  uint64 PK,
     lumidataid  uint64 not null references lumidata(lumidataid),
     cmslsnum     uint32,
     algoname     string,
     bxlumivalue  blob,
     bxlumierr    blob,
     bxlumiquality blob
)
15.
create table trgdata_entry(          #versionable entity table
     trgdataid uint64 PK,
     revisionid uint64 not null references revision(revisionid) ,
     entryid    uint64 not null
     source     string
)
16.
create table trgdata_id(             #id helper table
     nextid uint64 PK
)
17.
create table trgdata_entry_id(       #id helper table
     nextid uint64 PK
)
18.
create table trgdata(                #verionable data table
     trgdataid uint64 PK,
     revisionid uint64 not null references revision(revisionid) ,
     entryid  uint64 not null references trgdata_entry(entryid),
     runnum   uint32
)
19.
create table trglssummary(          #data table
     trglssummaryid uint64 PK,
     trgdataid uint64 not null references trgdata(trgdataid),
     cmslsnum  uint32,
     deadtimecount    uint32,
     bitzerocount uint32,
     bitzeroprescale uint32,
     pescalesblob   blob,
     bitcountblob   blob
)
20.
create table hltdata_entry(         #versionable entity table
     hltdataid uint64 PK,
     revisionid uint64 not null references revision(revisionid) ,
     entryid    uint64 not null,
     source     string
)
21.
create table hltdata_id(            #id helper table
     nextid uint64 PK
)
22.
create table hltdata_entry_id(      #id helper table
     nextid uint64 PK
)
23.
create table hltdata(                #verionable data table
    hltdataid uint64 PK,
    revisionid uint64 not null references revision(revisionid) ,
    entryid    uint64 not null references hltdata_entry(entryid),
    runnum    uint32,
    hltpathblob blob
)
24.
create table hltlssummary(           #data table
   hltlssummaryid uint64 PK,
   hltdataid uint64 not null references hltdata(hltdataid),
   cmslsnum uint32 not null,
   prescaleblob blob,
   countblob    blob,
   acceptblob     blob
)
25.
create table trghltmap(            #data table
   hltkey string not null,
   hltpathname string not null,
   l1seed      string not null
)
26.
create table lumivalidation(        #data table
   runnum uint32 not null,
   cmslsnum uint32 not null,
   flag string,
   comment string
)

new applications:

lumiNorm create -name a -defaultnorm value -normbyenergy "[{energy1:norm1},{energy2:norm2}]" -minrun 1234 -maxrun 5678 -m comment
lumiNorm describe -name a
lumiNorm list --verbose
lumiNorm modify -name a -normbyenergy "[{energy1:norm1},{energy2:norm2}]" -minrun 1234  -maxrun 6789 -m comment

lumiDataTag create -datatype 'lumi,trg or hlt' -name tagname -m comment
lumiDataTag copy -datatype 'lumi' -oldname -newname -m comment  
lumiDataTag list -datatype 'lumi' --verbose

lumiGlobalTag create -name global -luminame a -normname b -trgname c -hltname d -m comment
lumiGlobalTag list --verbose
lumiGlobalTag describe -name
